{% if env_bookshop_live %}
    {% assign postListItems = collections.happenings %}
  {% else %}
    {% assign postListItems = pagination.items %}
  {% endif %}
  {% assign color_group = styles.color_group %}
  
  {% assign postListItems = collections.happenings |  concat: collections.blog | happeningsFilter: page, happenings, contents.tags %}
  
  {% assign counter = 0 %}
  {% assign cardStyle = 'generic/happenings/' | append: styles.cardStyle | append: "Card" %}
  
  <div class="cs-w-full py-20 bg-{{styles.color_group}}-backgroundcolor flex flex-col items-center justify-center text-{{styles.color_group}}-textcolor">
  
    <div
      {% if contents.sectionId %}
      id="{{ contents.sectionId | idFilter }}"
      {% endif %}
      class="basecontainer">
      {% if env_bookshop_live and contents.showNote %}
        {% bookshop "generic/notification" heading: "Blog Cards" text: "The time to read will not show up while editing, but will show up on the live site" %}
      {% endif %}
      {% bookshop {{contents.heading._bookshop_name}} bind: contents.heading %}
      <div class="mt-12 grid  grid-cols-1 md:grid-cols-2 lg:grid-cols-3   gap-10 md:gap-20 ">
        {% for entry in postListItems %}
          {% capture image %}
            {% if entry.data.happeningImage and entry.data.happeningImage != ""  %}
            image:
              imagePath: {{ entry.data.happeningImage }}
              imageAlt: {{ entry.data.imageAltText }}
            {% else %}
            image:
              imagePath: {{ happenings.defaultImage }}
              imageAlt: {{ happenings.defaultImageAltText }}
            {% endif %}
            {% endcapture %}
          {% capture happeningInfo %}
            happeningTitle: {{ entry.data.title }}
            url: {{ entry.url }}
            happeningDatetime: '{% if entry.data.happeningDate %}{{ entry.data.happeningDate }}{% else %}{{ entry.date }}{% endif %}'
            blogTags: {{ entry.data.tags | ymlify | split: "," | json}}
            {{ image | strip}}
            color_group: {{styles.color_group}}
            {% endcapture %}
          {% assign happeningInfo = happeningInfo | ymlify %}
          {% if counter < 3 %}
            {% bookshop {{cardStyle}} bind: happeningInfo %}
          {% endif %}
          {% assign counter = counter | plus: 1 %}
        {% endfor %}
      </div>
    </div>
  </div>